var ENV="production";if("development"==ENV)var MESSAGING_SENDER_ID="558253539143",PUSH_TRACKING_URL="https://d22qm99o9uiw2g.cloudfront.net";else if("production"==ENV)MESSAGING_SENDER_ID="1046830746641",PUSH_TRACKING_URL="https://push-t.aitrillion.com";self.addEventListener("notificationclick",(function(t,i){if(t.action){const i=t.action,a=t.notification.data.actions.find((t=>t.action===i));if(a)var n=a.action}else if(t.notification.data&&t.notification.data.notification&&t.notification.data.notification.click_action)n=t.notification.data.notification.click_action;else if(t.notification.data.FCM_MSG&&t.notification.data.FCM_MSG.notification.click_action)n=t.notification.data.FCM_MSG.notification.click_action;else if(t.notification.data&&t.notification.data.url)n=t.notification.data.url;n=decodeURI(n);var a=encodeURI(n);clients.openWindow(a);var o=new URL(n),e=o.searchParams.get("shop_name"),c=o.searchParams.get("pushevent"),s=o.searchParams.get("push_type");c||(c="Main");var r=o.searchParams.get("reportid");t.waitUntil(fetch(PUSH_TRACKING_URL+"/wpi.html?action=click&id="+r+"&pushevent="+c+"&shop_name="+e+"&push_type="+s,{method:"GET",mode:"cors"}).then((function(t){})).then((function(t){}))),t.preventDefault(),t.notification.close()})),self.addEventListener("push",(function(t,i){var n=t.data.text(),a=JSON.parse(n).notification.click_action,o=new URL(a),e=o.searchParams.get("shop_name"),c=o.searchParams.get("reportid"),s=o.searchParams.get("push_type");t.waitUntil(fetch(PUSH_TRACKING_URL+"/wpi.html?action=impression&id="+c+"&shop_name="+e+"&push_type="+s,{method:"GET",mode:"cors"}).then((function(t){})).then((function(t){})))})),self.addEventListener("notificationclose",(function(t){})),self.addEventListener("push",(function(t,i){const n=t.data.json().notification,a={body:n.body,icon:n.icon,image:n.image,data:{url:n.click_action,actions:n.actions},actions:n.actions,requireInteraction:n.requireInteraction};t.waitUntil(self.registration.showNotification(n.title,a))}));